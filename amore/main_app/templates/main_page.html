<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"></script>
<link rel="shortcut icon" href="/media/favicon.png" type="image/png">
<link rel="stylesheet" type="text/css" href="/static/main_page.css"/>
<body>
<div class="top-bar">
    <a href="#" style="margin-right: 40px">
        <img src="/media/logo.png" alt="ConAmore" class="img-fluid img-logo slow-motion"></a>
    <a class="display-5 big-but slow-motion" href="#">
        Вакансии</a>
    <a class="display-5 big-but slow-motion" href="#">
        Контакты</a>
</div>

{% block content %}

<div class="products-bar shadow" id="bar_category">
    <a href="#">
        <img src="/media/logo.png" alt="ConAmore" class="img-fluid img-logo-bar slow-motion"></a>
    {% for category in categories %}
    <a class="col lead slow-motion a-products" align="center" href="#{{ category.slug }}">
        <kbd>
            {{ category }}
        </kbd>
    </a>
    {% endfor %}
</div>

<div class="container slide-cont">
    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
        </div>
        <div class="shadow carousel-inner round-edges img-thumbnail">
            <div class="carousel-item active" data-bs-interval="10000">
                <img src="{{ active_promo.banner.url }}"
                     class="img-fluid round-edges">
            </div>
            {% for promo in promos %}
            <div class="carousel-item" data-bs-interval="10000">
                <img src="{{ promo.banner.url }}"
                     class="img-fluid round-edges">
            </div>
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions"
                data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Предыдущий</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions"
                data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Следующий</span>
        </button>
    </div>
</div>

<div class="shadow container round-edges products-cont row img-thumbnail" align="center" id="products-cont" style="min-height: 180px">
    {% for category in categories %}
    <a class="col lead slow-motion a-products" align="center" href="#{{ category.slug }}">
        {% if category.image_icon %}
        <img src="{{ category.image_icon.url }}" class="img-fluid icon-products slow-motion"
             alt='Иконка "{{ category.name }}"'>
        <br>
        {% endif %}
        <kbd>
            {{ category }}
        </kbd>
    </a>
    {% endfor %}
</div>

{% for category, products in dict_category_products.items %}
    <h1 class="display-4" id="{{ category.slug }}" style="padding-top: 80px; margin-left: 20%">
        {{ category }}
    </h1>
    <div class="shadow container round-edges products-cont img-thumbnail grid-card" style="min-height: 500px; width: 66%">
        {% for product in products %}
            <div class="shadow-sm card round-edges" style="width: 18rem;">
                {% if product.image %}
                    <img src="{{ product.image.url }}" class="round-edges card-img-top" alt='Иконка "{{ product.name }}"'>
                {% endif %}
                <div class="card-body">
                    <h5 class="card-title">{{ product }}</h5>
                    <p class="card-text" style="height: 100px; color: grey">{{ product.description }}</p>
                    <div class="row">
                        <div class="col">
                            <a href="#" class="shadow-sm slow-motion a-in-cart">
                                        В корзину
                            </a>
                        </div>
                        <p class="col-4" align="right">
                            {{ product.price }} ₽
                        </p>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endfor %}

{% endblock content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
$(function() {
  var elem = document.getElementById('products-cont');
  var height_elem = elem.offsetHeight;
  $(window).on('load scroll', function() {
  	var top = elem.getBoundingClientRect().top ;
    if (top + height_elem <= 0) {
      $('#bar_category').css({
        opacity: 1
      });
    } else {
      $('#bar_category').css({
        opacity: 0
      });
    }
  });
});
</script>
</body>
</html>